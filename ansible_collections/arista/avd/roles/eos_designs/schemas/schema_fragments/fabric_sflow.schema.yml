# Copyright (c) 2023 Arista Networks, Inc.
# Use of this source code is governed by the Apache License 2.0
# that can be found in the LICENSE file.
# yaml-language-server: $schema=../../../../plugins/plugin_utils/schema/avd_meta_schema.json
# Line above is used by RedHat's YAML Schema vscode extension
# Use Ctrl + Space to get suggestions for every field. Autocomplete will pop up after typing 2 letters.
type: dict
keys:
  fabric_sflow:
    documentation_options:
      table: management-sflow-settings
    type: dict
    description: |-
      sFlow settings.
      Configure destinations and default enabling of sFlow for varous interface types across the fabric.
      The sFlow process will be enabled if any interface is enabled for sFlow.
      For source-interfaces see "source_interfaces.sflow"
    keys:
      destinations:
        type: list
        items:
          type: dict
          keys:
            destination:
              type: str
              required: true
              description: sFlow destination IP address
            port:
              type: int
              description: Port number
              convert_types:
                - str
            vrf:
              type: str
              description: |-
                VRF Name.
                Can be used in combination with "use_mgmt_interface_vrf" and "use_inband_mgmt_vrf" to configure the destination under multiple VRFs.
              convert_types:
                - int
            use_mgmt_interface_vrf:
              type: bool
              description:
                Configure the destination under the VRF set with "mgmt_interface_vrf".
                Can be used in combination with "vrf" and "use_inband_mgmt_vrf" to configure the destination under multiple VRFs.
            use_inband_mgmt_vrf:
              type: bool
              description:
                Configure the destination under the VRF set with "inband_mgmt_vrf".
                Ignored if inband management is not configured for the device.
                Can be used in combination with "vrf" and "use_mgmt_interface_vrf" to configure the destination under multiple VRFs.
      uplinks:
        description: Enable sFlow on all fabric uplinks.
        type: bool
      downlinks:
        description: Enable sFlow on all fabric downlinks.
        type: bool
      endpoints:
        description: Enable sFlow on all endpoints ports.
        type: bool
      l3_edge:
        description: Enable sFlow on all p2p_links defined under l3_edge.
        type: bool
      core_interfaces:
        description: Enable sFlow on all p2p_links defined under core_interfaces.
        type: bool
      mlag_interfaces:
        description: Enable sFlow on all MLAG peer interfaces.
        type: bool
      structured_config:
        type: dict
        description: Custom structured config added under sflow for eos_cli_config_gen
